language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: BAlkx2t7NxAp3fipz9FqNwm7mprjwzqMGMl9bIs4nFEphnkt7pJWVywUzWJqb61gQFk49UvUkas66moAyoa2Erynvpbb0+e7CO5dIRF+efw80ozM9P79sN7XDQpV+gnJ0/eMp4+WpZS354TPrYCuL6bKBjqrMH9z8JsD6WuM8JJ6V5Y2k6HnNowLwNbmLlhObrLA0PZV0q4XXrqotcPMW9pQkdOZcgJlqF7eYSVpaebjBT6AHtIA0KXLJn3b1Ry5YWwGlDAbwXDhshy6Bm5L9HMmFVhI0MmJEYEYVtIWThRe1J+pWTHOVM+qlaBZn0tbxj4wLQ/F1dPwUJrbvpFe7UQ/ztzDCJ0Ts4nZUGP2YrIaRcO4g6QVuKVFa4Bg0pmjU/Rk8wXQhpcpgV9zinrLV56agLQsCOcoZYicWQhkuU4ZO71U2vqB08S8EnzgF/YAZFVOCLrGFLhQySUaLjDUJt2LrQZxQi4Jb78yK96JxEqDbpGorf/pG2VhGaxg2Vqw/lltgr6Qr0F8FOc3yCJ4Bs0bu0JWR5HM7YAN0QlRowxT0+zWqKbaUnkmaGExiZSZrt+ROCBMTi/TX4s+TYOjLT9sDmLvIVX1NkQx7I6tN1tAYl6WF0EeR3hIaML1jRp/EIBZl2rwgX1hmTNL7ITUdZtVapx7S0PhY5WNsEQDtiU=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
